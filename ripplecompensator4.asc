Version 4
SHEET 1 1420 680
WIRE 688 -160 448 -160
WIRE 768 -160 688 -160
WIRE 880 -160 768 -160
WIRE 688 -144 688 -160
WIRE 768 -80 768 -96
WIRE 880 -80 768 -80
WIRE 768 -32 768 -80
WIRE 160 48 -160 48
WIRE 640 48 592 48
WIRE 688 48 688 -80
WIRE 688 48 640 48
WIRE 768 48 688 48
WIRE -160 80 -160 48
WIRE 160 80 160 48
WIRE 848 80 624 80
WIRE 512 128 320 128
WIRE 544 128 512 128
WIRE 704 128 624 128
WIRE 320 160 320 128
WIRE -160 176 -160 160
WIRE 160 176 160 160
WIRE 272 176 160 176
WIRE 704 192 704 128
WIRE 848 192 848 80
WIRE 160 208 160 176
WIRE -32 224 -160 224
WIRE 112 224 -32 224
WIRE 112 272 32 272
WIRE 272 272 272 224
WIRE 320 272 320 240
WIRE -160 304 -160 224
WIRE 32 304 32 272
WIRE 160 336 160 288
WIRE -160 400 -160 384
WIRE 32 400 32 384
FLAG 160 336 0
FLAG 32 400 0
FLAG -160 400 0
FLAG -160 176 0
FLAG 320 272 0
FLAG 272 272 0
FLAG 320 128 gate
FLAG -32 224 ctrl
FLAG 592 176 0
FLAG 640 48 drain
FLAG 448 -80 0
FLAG 848 272 0
FLAG 704 272 0
SYMBOL sw 160 304 M180
SYMATTR InstName S2
SYMATTR Value comp
SYMBOL res 144 64 R0
SYMATTR InstName R1
SYMATTR Value 100k
SYMBOL voltage 32 288 R0
WINDOW 3 -31 147 Left 2
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR Value PULSE({Vlow} {Vhigh} 0 {Tr} {Tr} 0 {2*Tr})
SYMATTR InstName Vtriangle
SYMBOL voltage -160 288 R0
WINDOW 3 -80 149 Left 2
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR Value PWL(0 4.91 .01 0)
SYMATTR InstName Vctrl
SYMBOL battery -160 64 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName Vcc
SYMATTR Value 10
SYMBOL e 320 144 R0
SYMATTR InstName E1
SYMATTR Value 1
SYMBOL ind 752 -48 R0
SYMATTR InstName L1
SYMATTR Value 150µH
SYMBOL schottky 704 -80 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D1
SYMATTR Value 1N5819
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL cap 752 -160 R0
SYMATTR InstName C1
SYMATTR Value 970µF
SYMBOL voltage 448 -176 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V1
SYMATTR Value 400
SYMBOL power_nmos_heat 544 112 R0
SYMATTR Value C2M0160120D
SYMATTR InstName U1
SYMBOL res 864 -176 R0
SYMATTR InstName R3
SYMATTR Value 1k
SYMBOL voltage 704 176 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V2
SYMATTR Value 30
SYMBOL voltage 848 176 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V3
SYMATTR Value 50
TEXT -112 480 Left 2 !.model comp sw (ron=10 Roff=1e8 Vt=0 Vh=0.1)
TEXT -232 376 Left 2 !.param F=31.25k Tr={0.5/F} Vlow=0.1 Vhigh=4.9
TEXT -120 24 Left 2 !.tran 0 .01 0 .001 startup uic
TEXT 688 88 Left 2 !.include C2M0160120D - Packaged.lib
