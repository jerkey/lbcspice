Version 4
SHEET 1 1188 680
WIRE 944 -64 368 -64
WIRE 768 -32 464 -32
WIRE 848 -32 768 -32
WIRE 1024 -32 912 -32
WIRE 160 48 -160 48
WIRE 368 48 368 -64
WIRE 464 48 368 48
WIRE 640 48 592 48
WIRE 768 48 640 48
WIRE 1024 48 944 48
WIRE -160 80 -160 48
WIRE 160 80 160 48
WIRE 448 128 320 128
WIRE 544 128 448 128
WIRE 1024 128 768 128
WIRE 768 144 768 128
WIRE 768 144 592 144
WIRE 320 160 320 128
WIRE -160 176 -160 160
WIRE 160 176 160 160
WIRE 272 176 160 176
WIRE 160 208 160 176
WIRE -32 224 -160 224
WIRE 112 224 -32 224
WIRE 112 272 32 272
WIRE 272 272 272 224
WIRE 320 272 320 240
WIRE 656 288 560 288
WIRE 720 288 656 288
WIRE -160 304 -160 224
WIRE 32 304 32 272
WIRE 160 336 160 288
WIRE 656 368 560 368
WIRE 720 368 656 368
WIRE 928 368 864 368
WIRE -160 400 -160 384
WIRE 32 400 32 384
FLAG 160 336 0
FLAG 32 400 0
FLAG -160 400 0
FLAG -160 176 0
FLAG 320 272 0
FLAG 272 272 0
FLAG 448 128 gate
FLAG -32 224 ctrl
FLAG 592 144 0
FLAG 640 48 drain
FLAG 656 224 plus
FLAG 656 432 plus
FLAG 928 368 minus
FLAG 928 288 plus
FLAG 720 432 minus
FLAG 720 224 minus
FLAG 864 368 0
SYMBOL sw 160 304 M180
SYMATTR InstName S2
SYMATTR Value comp
SYMBOL res 144 64 R0
SYMATTR InstName R1
SYMATTR Value 100k
SYMBOL voltage 32 288 R0
WINDOW 3 -31 147 Left 2
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR Value PULSE({Vlow} {Vhigh} 0 {Tr} {Tr} 0 {2*Tr})
SYMATTR InstName Vtriangle
SYMBOL voltage -160 288 R0
WINDOW 3 -80 149 Left 2
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR Value PWL(0 4.91 .01 0)
SYMATTR InstName Vctrl
SYMBOL battery -160 64 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName Vcc
SYMATTR Value 5
SYMBOL e 320 144 R0
SYMATTR InstName E1
SYMATTR Value 1
SYMBOL nmos 544 48 R0
WINDOW 3 174 433 Left 2
SYMATTR Value BUK9K5260E
SYMATTR InstName M1
SYMBOL ind 752 -48 R0
SYMATTR InstName L1
SYMATTR Value 150µH
SYMBOL schottky 912 -48 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName D1
SYMATTR Value 1N5819
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL voltage 464 -48 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V1
SYMATTR Value 12
SYMBOL res 1008 -48 R0
SYMATTR InstName R2
SYMATTR Value 1
SYMBOL voltage 560 272 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
WINDOW 0 -58 14 Left 2
WINDOW 3 -195 93 Left 2
SYMATTR InstName V2
SYMATTR Value SINE(0 328 60)
SYMBOL diode 640 368 R0
SYMATTR InstName D2
SYMBOL diode 672 288 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D3
SYMBOL diode 704 224 R0
SYMATTR InstName D4
SYMBOL diode 736 432 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D5
SYMBOL res 912 272 R0
SYMATTR InstName R3
SYMATTR Value 1k
TEXT -56 528 Left 2 !.model comp sw (ron=10 Roff=1e8 Vt=0 Vh=0.1)
TEXT -56 560 Left 2 !.param F=31.25k Tr={0.5/F} Vlow=0.1 Vhigh=4.9
TEXT -56 608 Left 2 !.tran 0 .33333 0 .00001 startup
